We will now focus on the communication.
Specifically we will focus on communication between pairs of people, e.g.\ 
Alice talking to Bob.
\citeauthor{otr2004} designed a secure protocol for two-people communication, 
the \ac{OTR} protocol.
They desired an electronic equivalent of face-to-face conversations, i.e.\ that 
they leave no proofs of any kind behind:
if Alice and Bob has had a conversation, Bob cannot go to Eve afterwards and 
prove anything about what Alice has said --- the same as in a face-to-face 
conversation.
This property is not true for email or most centralized communication services.

\subsubsection{Standard Email}

The standard email system does not provide any security.
A suitable analogy would be that each message is a postcard, i.e.\ it has no 
envelope, so the content and address are visible on it.
This means that the postman can read the cards' contents, their recipients' and
senders' addresses.
(Yes, unlike real postcards these also include the sender's address.)
Furthermore, most postmen use transparent sacks to carry the postcards, so 
everyone along the way can also read the sender's and recipient's address and 
the contents.
However, some postmen have started using non-transparent sacks, i.e.\ encrypted 
connections between the servers, so those postcards can only be read by the 
staff in the post-office.
Thus the email system provides no confidentiality: each email server can read 
the messages, each network operator along the transport route can also read 
(and make a copy of) each email.
However, it is actually worse than that, because the email system provides no 
integrity either.
This means that the postman, or anyone along the way, can do arbitrary 
modifications to the messages without anyone noticing the difference.
We can safely say that we cannot rely on the email system for neither security 
nor privacy when planning a protest.

When using a centralized communications service, such as Facebook, the level of
security and privacy we can achieve is that the postman carries non-transparent
sacks.
The business model of most such services is to read peoples postcards to better
profile their interests and thus deliver better suiting advertising.
Here, third parties cannot directly see who is communicating with whom.
They can only see that something goes to and from the service.
However, all information is available internally to the service.
This means that there are ways of learning this, for example through 
PRISM~\cite{Prism} of the \ac{NSA}.

\subsubsection{Secure Email and Text Messaging}

Secure email works by employing cryptography: we encrypt the contents of the 
postcard, providing confidentiality, and then add a digital signature to 
prevent modifications.
Thus the recipient is the only one who can read the message and the recipient 
can also verify that the message has not been modified along the way.
To make key management easy, most schemes use public-key cryptography.
This means that we have two keys, one which is public and another which is kept
private.
For encryption, the public key can transform a message to a ciphertext, i.e.\ 
a random-looking text string.
The private key can be used to transform the ciphertext back to the message.
Given only the public key, it is \enquote{impossible} to find the private key.
For signatures, we can use the private key to compute a signature of a message 
and then send the message and its signature.
The recipient can then use the public key to verify the signature of the 
message.
This signature depends on the entire message, so it is impossible to move 
a signature to another message --- unlike signatures on paper.
And since it is impossible to find the private key given only the public key, 
no one can create fake signatures.

One problem with this approach to secure email is that the sender and recipient
are still in the clear, anyone can read them.
So the content is hidden, but the meta-data is not.

Another problem is that the digital signatures used provides a property called 
non-repudiation.
Say that Alice securely sent an email to Bob, if Eve would compromise Bob's 
private key, as many government agencies can, then she would learn that Alice 
--- and no one else --- has sent that message to Bob.
Bob might even give the message and his key to Eve voluntarily or under threat.
This is exactly the property that \citeauthor{otr2004} wanted to remove with 
\ac{OTR}.
They can do this by leveraging the interactive nature of \ac{IM} and changing 
the digital signatures to shared-key \acp{MAC}.
Shared-key means that Alice and Bob share the same key for generating and 
verifying \iac{MAC}.
This means that Bob can generate valid \acp{MAC} for any message and show to 
Eve, thus he cannot prove to Eve what Alice has said --- since he could have 
created this \enquote{proof} himself.
In addition, Alice and Bob do not use the same \ac{MAC} key throughout their 
conversation, then continuously exchange new keys, one for each message.
However, in this situation, Eve still has only two candidates as the author of 
the message: Alice and Bob, since they both have access to the shared keys.
To remedy this problem Alice and Bob publishes the \ac{MAC} keys after use, 
i.e.\ when they no longer need them.
This gives \enquote{everyone} the possibility of generating messages that 
verifies under Alice and Bob's key, so now Alice and Bob can argue that someone 
(Eve included) could have modified the ciphertext.

The \ac{OTR} protocol became widely spread after the 2013 revelations about the
mass surveillance of the \ac{NSA} and \ac{GCHQ}, many derivatives of the 
protocol emerged in smartphone apps.
Among the most wide-spread derivatives of \ac{OTR} is Signal (formerly 
TextSecure)~\cite{SignalApp}\footnote{%
  TextSecure actually existed before the Snowden revelations, but has seen more
  wide-spread use after.
}.
The Signal protocol has, unlike many other of the derivatives, been formally 
analysed and proven that it indeed provides its claimed security 
properties~\cite{TextSecureAnalysis}.
One improvement over \ac{OTR} is the deniability.
In Signal the authentication is set up in such a way that any person knowing 
the public key of Alice and Bob can generate a fake transcript of 
a conversation.
This results in that Eve has many more candidates for the authors of 
a conversation.

\subsubsection{When the Adversary Controls the Network}

\input{OTPKX.tex}
